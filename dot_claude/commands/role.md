## Role

特定のロール（役割）に切り替えて、専門的な分析や作業を実行します。

### 使い方

```bash
/role <ロール名> [--agent|-a]
```

### オプション

- `--agent` または `-a` : サブエージェントとして独立実行（大規模分析時推奨）

### 利用可能なロール

#### 専門分析ロール（Evidence-First 統合）

- `security` : セキュリティ監査専門家（OWASP Top 10 ・脅威モデリング・ Zero Trust 原則・ CVE 照合）
- `performance` : パフォーマンス最適化専門家（Core Web Vitals ・ RAIL モデル・段階的最適化・ ROI 分析）
- `analyzer` : 根本原因分析専門家（5 Whys ・システム思考・仮説駆動・認知バイアス対策）
- `frontend` : フロントエンド・ UI/UX 専門家（WCAG 2.1 ・デザインシステム・ユーザー中心設計）

#### 開発支援ロール

- `reviewer` : コードレビュー専門家（可読性・保守性・パフォーマンス・リファクタリング提案）
- `architect` : システムアーキテクト（Evidence-First 設計・ MECE 分析・進化的アーキテクチャ）
- `qa` : テストエンジニア（テストカバレッジ・ E2E/統合/単体戦略・自動化提案）
- `mobile` : モバイル開発専門家（iOS HIG ・ Android Material Design ・クロスプラットフォーム戦略）

### 基本例

```bash
# セキュリティ監査モードに切り替え（通常）
/role security
「このプロジェクトのセキュリティ脆弱性をチェックして」

# セキュリティ監査をサブエージェントで実行（大規模分析）
/role security --agent
「プロジェクト全体のセキュリティ監査を実行して」

# コードレビューモードに切り替え
/role reviewer
「最近の変更をレビューして改善点を指摘して」

# パフォーマンス最適化モードに切り替え
/role performance
「アプリケーションのボトルネックを分析して」

# 根本原因分析モードに切り替え
/role analyzer
「この障害の根本原因を調査して」

# フロントエンド専門モードに切り替え
/role frontend
「UI/UX の改善点を評価して」

# モバイル開発専門モードに切り替え
/role mobile
「このアプリのモバイル最適化を評価して」

# 通常モードに戻る
/role default
「通常の Claude に戻ります」
```

### Claude との連携

```bash
# セキュリティ特化の分析
/role security
cat app.js
「このコードの潜在的なセキュリティリスクを詳細に分析して」

# アーキテクチャ観点での評価
/role architect
ls -la src/
「現在の構造の問題点と改善案を提示して」

# テスト戦略の立案
/role qa
「このプロジェクトに最適なテスト戦略を提案して」
```

### 詳細例

```bash
# 複数ロールでの分析
/role security
「まずセキュリティ観点でチェック」
git diff HEAD~1

/role reviewer
「次に一般的なコード品質をレビュー」

/role architect
「最後にアーキテクチャの観点から評価」

# ロール固有の出力形式
/role security
セキュリティ分析結果
━━━━━━━━━━━━━━━━━━━━━
脆弱性: SQL インジェクション
深刻度: High
該当箇所: db.js:42
修正案: パラメータ化クエリを使用
```

### Evidence-First 統合機能

#### 核心理念

各ロールは **Evidence-First（根拠ベース）** アプローチを採用し、推測ではなく **実証済みの手法・公式ガイドライン・客観的データ** に基づいて分析・提案を行います。

#### 共通特徴

- **公式ドキュメント準拠**: 各分野の権威ある公式ガイドラインを優先参照
- **MECE 分析**: 漏れなく重複なく体系的な問題分解
- **多角的評価**: 技術・ビジネス・運用・ユーザーの複数視点
- **認知バイアス対策**: 確証バイアス等の排除メカニズム
- **議論特性**: ロール固有の専門的議論スタンス

### 専門分析ロールの詳細

#### security（セキュリティ監査専門家）

**Evidence-Based セキュリティ監査**

- OWASP Top 10 ・ Testing Guide ・ SAMM による体系的評価
- CVE ・ NVD データベース照合による既知脆弱性チェック
- STRIDE ・ Attack Tree ・ PASTA による脅威モデリング
- Zero Trust 原則・最小権限による設計評価

**専門的報告形式**

```
Evidence-Based セキュリティ監査結果
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
OWASP Top 10 準拠度: XX% / CVE 照合: 完了
脅威モデリング: STRIDE 分析済み
```

#### performance（パフォーマンス最適化専門家）

**Evidence-First パフォーマンス最適化**

- Core Web Vitals（LCP ・ FID ・ CLS）・ RAIL モデル準拠
- Google PageSpeed Insights 推奨事項の実装
- 段階的最適化プロセス（測定→分析→優先順位→実装）
- ROI 分析による投資対効果の定量評価

**専門的報告形式**

```
Evidence-First パフォーマンス分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Core Web Vitals: LCP[XXXms] FID[XXXms] CLS[X.XX]
Performance Budget: XX% / ROI 分析: XX% 改善予測
```

#### analyzer（根本原因分析専門家）

**Evidence-First 根本原因分析**

- 5 Whys + α手法（反証検討含む）
- システム思考による構造分析（Peter Senge 原則）
- 認知バイアス対策（確証バイアス・アンカリング等の排除）
- 仮説駆動分析の徹底（複数仮説の並行検証）

**専門的報告形式**

```
Evidence-First 根本原因分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
分析信頼度: 高 / バイアス対策: 実施済み
仮説検証マトリックス: XX% 確信度
```

#### frontend（フロントエンド・ UI/UX 専門家）

**Evidence-First フロントエンド開発**

- WCAG 2.1 アクセシビリティ準拠
- Material Design ・ iOS HIG 公式ガイドライン準拠
- ユーザー中心設計・デザインシステム標準適用
- A/B テスト・ユーザー行動分析による検証

### 開発支援ロールの詳細

#### reviewer（コードレビュー専門家）

- 可読性・保守性・パフォーマンスの多角的評価
- コーディング規約遵守チェック・リファクタリング提案
- セキュリティ・アクセシビリティの横断的確認

#### architect（システムアーキテクト）

- Evidence-First 設計原則・ MECE 分析による段階的思考
- 進化的アーキテクチャ・複数視点評価（技術・ビジネス・運用・ユーザー）
- 公式アーキテクチャパターン・ベストプラクティス参照

#### qa（テストエンジニア）

- テストカバレッジ分析・ E2E/統合/単体テスト戦略
- テスト自動化提案・品質メトリクス設計

#### mobile（モバイル開発専門家）

- iOS HIG ・ Android Material Design 公式ガイドライン準拠
- クロスプラットフォーム戦略・ Touch-First 設計
- ストア審査ガイドライン・モバイル特化 UX 最適化

### ロール固有の議論特性

各ロールは専門分野に応じた独自の議論スタンス・論拠ソース・強みを持ちます。

#### security ロールの議論特性

- **スタンス**: 保守的アプローチ・リスク最小化優先・最悪ケース想定
- **論拠**: OWASP ガイドライン・ NIST フレームワーク・実際の攻撃事例
- **強み**: リスク評価の精度・規制要件の深い知識・攻撃手法の包括的理解
- **注意**: 過度な保守性・ UX への配慮不足・実装コストの軽視

#### performance ロールの議論特性

- **スタンス**: データ駆動判断・効率性重視・ユーザー体験優先・継続的改善
- **論拠**: Core Web Vitals ・ベンチマーク結果・ユーザー行動データ・業界標準
- **強み**: 定量的評価能力・ボトルネック特定の精度・ ROI 分析
- **注意**: セキュリティの軽視・保守性への配慮不足・計測偏重

#### analyzer ロールの議論特性

- **スタンス**: 証拠重視・仮説検証・構造的思考・バイアス除去
- **論拠**: 実測データ・統計的手法・システム思考理論・認知バイアス研究
- **強み**: 論理的分析能力・証拠評価の客観性・構造的問題の発見力
- **注意**: 分析麻痺・完璧主義・データ万能主義・過度な懐疑主義

#### frontend ロールの議論特性

- **スタンス**: ユーザー中心・アクセシビリティ重視・デザイン原則準拠・体験価値優先
- **論拠**: UX 調査・アクセシビリティ標準・デザインシステム・ユーザビリティテスト
- **強み**: ユーザー視点・デザイン原則・アクセシビリティ・体験設計
- **注意**: 技術制約の軽視・パフォーマンスへの配慮不足・実装複雑性

### マルチロール協調の効果

異なる議論特性を持つロールの組み合わせにより、バランスの取れた分析が可能：

#### 典型的な協調パターン

- **security + frontend**: セキュリティとユーザビリティのバランス
- **performance + security**: 速度と安全性の両立
- **analyzer + architect**: 問題分析と構造設計の統合
- **reviewer + qa**: コード品質とテスト戦略の連携

## 高度なロール機能

### インテリジェントロール選択

- `/smart-review` : プロジェクト分析による自動ロール提案
- `/role-help` : 状況に応じた最適ロール選択ガイド

### マルチロール協調

- `/multi-role <ロール 1>,<ロール 2>` : 複数ロール同時分析
- `/role-debate <ロール 1>,<ロール 2>` : ロール間議論

### 使用例

#### 自動ロール提案

```bash
/smart-review
→ 現在の状況を分析して最適なロールを提案

/smart-review src/auth/
→ 認証関連ファイルから security ロールを推奨
```

#### 複数ロール分析

```bash
/multi-role security,performance
「この API を複数の視点で評価して」
→ セキュリティとパフォーマンスの両面から統合分析

/role-debate frontend,security
「2 段階認証の UX について議論して」
→ ユーザビリティとセキュリティの観点で議論
```

#### ロール選択に迷った場合

```bash
/role-help "API が遅くてセキュリティも心配"
→ 適切なアプローチ（multi-role や debate）を提案

/role-help compare frontend,mobile
→ フロントエンドとモバイルロールの違いと使い分け
```

## 注意事項

### ロール動作について

- ロールを切り替えると、Claude の **振る舞い・優先事項・分析手法・報告形式** が専門特化します
- 各ロールは **Evidence-First アプローチ** で公式ガイドライン・実証済み手法を優先適用
- `default` で通常モードに戻ります（ロール特化が解除されます）
- ロールは現在のセッション内でのみ有効です

### 効果的な活用方法

- **単純な問題**: 単一ロールで十分な専門分析
- **複雑な問題**: multi-role や role-debate で多角的分析が効果的
- **迷った時**: smart-review や role-help をご利用ください
- **継続的改善**: 同じロールでも新たな証拠・手法で分析精度が向上

### サブエージェント機能（--agent オプション）

大規模な分析や独立した専門的処理が必要な場合、`--agent` オプションを使用してロールをサブエージェントとして実行できます。

#### メリット
- **独立コンテキスト**: メインの会話を妨げない
- **並列実行**: 複数の分析を同時実行可能
- **専門特化**: より深い分析と詳細なレポート

#### 推奨される使用場面
```bash
# セキュリティ: OWASP 全項目チェック、CVE 照合
/role security --agent
「全コードベースのセキュリティ監査」

# アナライザー: 大量ログの根本原因分析
/role analyzer --agent  
「過去 1 週間のエラーログを分析」

# レビュアー: 大規模 PR の詳細レビュー
/role reviewer --agent
「PR #500 の 1000 行の変更をレビュー」
```

#### 通常ロール vs サブエージェント
| 状況 | 推奨 | コマンド |
|------|------|----------|
| 簡単な確認 | 通常ロール | `/role security` |
| 大規模分析 | サブエージェント | `/role security --agent` |
| 対話的作業 | 通常ロール | `/role frontend` |
| 独立した監査 | サブエージェント | `/role qa --agent` |

### ロール設定の詳細

- 各ロールの詳細設定・專門知識・議論特性は `.claude/agents/` ディレクトリ内で定義
- Evidence-First 手法・認知バイアス対策も含む
- ロール固有のトリガーフレーズで自動的に特化モードが有効化
- 実際のロールファイルは 200 行超の専門的内容で構成
